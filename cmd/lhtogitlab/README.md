Lighthouse to GitLab migrator
=============================

This is a Go program which can be used to migrate data from a
Lighthouse export file generated using the `lh export` command to
GitLab (see
[cmd/lh](https://github.com/nwidger/lighthouse/blob/master/cmd/lh)).
It migrates all Lighthouse users, projects, milestones and tickets
contained within the export file.

## Installation

``` no-highlight
go get -u github.com/nwidger/lighthouse/cmd/lhtogitlab
```

## Usage

Run `lhtogitlab` with no arguments for usage help:

``` no-highlight
$ lhtogitlab
Usage of lhtogitlab:
  -base-url string
    	GitLab base URL to use (i.e., https://gitlab.example.com/)
  -delete
    	Delete all GitLab projects and users (except user owning API token -token) before importing
  -insecure
    	Allow insecure HTTPS connections to GitLab API
  -milestone string
    	Only migrate milestones with the given title (useful for testing)
  -number int
    	Only migrate tickets with the given number (useful for testing)
  -password string
    	Password to use when creating GitLab users (default "changeme")
  -project string
    	Only migrate projects with the given name (useful for testing)
  -token string
    	GitLab API token to use
  -users string
    	Path to JSON file mapping Lighthouse user ID's to GitLab users
```

Required arguments are `-base-url`, `-token` and `-users`.  See the
next section for the expected format of the file specified by
`-users`.  The final argument to `lhtogitlab` must be the path to a
Lighthouse export file generated by the `lh export` command.

See [cmd/lh](https://github.com/nwidger/lighthouse/blob/master/cmd/lh)
for more details about the usage of the `lh export` command.

## Users Map

The `-users` argument specifies a path to a JSON file mapping
Lighthouse user ID's to GitLab users.  Each user will be created in
GitLab using the name, username and email fields provided.  See below
for an example:

``` json
{
    "123": {
        "name": "Bob Bobbington",
        "username": "bob",
        "email": "bob@example.com"
    },
    "456": {
        "name": "Fred Freddington",
        "username": "fred",
        "email": "fred@example.com"
    },
    "789": {
        "name": "Bill Billington",
        "username": "bill",
        "email": "bil@example.com"
    }
}
```

## Output

The tool prints a line to standard out for each user, project,
milestone and ticket it migrates.  Errors are printed to standard
error.  The tool returns with a zero status code if the migration was
successful.
